# AI-Powered Code Review Service

This Spring Boot application provides automated AI-powered code reviews for Pull Requests (PRs) managed via Bitbucket. It listens to Bitbucket webhook events, processes PR data, fetches modified files, and integrates seamlessly with AI services such as GPT, Grok, Copilot, and Gemini to generate automated code improvement suggestions.

## Technologies Used

* Java 21
* Spring Boot 3.x
* Lombok
* Liquibase
* PostgreSQL
* Bitbucket Cloud
* Ngrok (for local testing)
* React.js (frontend)

## System Requirements

* Java 21
* Maven
* PostgreSQL
* Node.js
* Bitbucket account with an existing repository
* Ngrok ([https://ngrok.com/](https://ngrok.com/)) installed and configured

## Project Structure

### Backend

```
com.review.reviewservice
├── config
│   ├── AiProperties
│   ├── BitbucketProperties
│   ├── RestTemplateConfig
│   └── SecurityConfig
├── controller
│   ├── AdminController
│   ├── ChatController
│   ├── FeedbackController
│   ├── UserController
│   └── WebhookController
├── dto
│   ├── BitbucketWebhookPayload
│   ├── ChatRequestDto
│   ├── ChatResponseDto
│   ├── DiffstatEntry
│   ├── DiffstatResponse
│   ├── FeedbackDto
│   ├── FileData
│   ├── FileInfo
│   ├── MessageDto
│   └── UserDto
├── exceptions
│   ├── UserAlreadyExistsException
│   └── UserNotFoundException
├── model
│   └── entity
│       ├── AiModel
│       ├── Feedback
│       ├── Role
│       └── User
├── repository
│   ├── AiModelRepository
│   ├── FeedbackRepository
│   ├── RoleRepository
│   └── UserRepository
├── service
│   ├── BitbucketService
│   ├── ChatService
│   ├── CodeReviewService
│   ├── CustomOAuth2UserService
│   ├── EmailFetcherService
│   ├── FeedbackService
│   └── UserService
├── resources
│   ├── bitbucket-json (example payloads)
│   ├── db.changelog (Liquibase migrations)
│   ├── static
│   ├── templates
│   ├── application.yml
│   └── liquibase.properties
└── ReviewServiceApplication
```

### Frontend

```
FRONT-END
├── public
├── src
│   ├── api
│   │   ├── admin.js
│   │   ├── chat.js
│   │   └── user.js
│   ├── components
│   │   ├── PRList.jsx
│   │   └── UserProfile.jsx
│   ├── pages
│   │   ├── HomePage.jsx
│   │   ├── LoginPage.jsx
│   │   ├── SignUpPage.jsx
│   │   └── UserPage.jsx
│   ├── routes
│   │   └── AppRoutes.jsx
│   ├── App.css
│   ├── App.js
│   ├── config.js
│   └── index.js
├── .env
├── .gitignore
└── package-lock.json
```

## Setup Instructions

### Backend

1. Clone the Repository

```bash
git clone https://bitbucket.org/antonrotaru/code-review-app.git
cd code-review-app
```

2. Configure Database
   Ensure PostgreSQL is running, create a database, and configure it in `application.yml`.

3. Run the Application

```bash
./mvnw spring-boot:run
```

4. Start Ngrok
   Expose the application to the web:

```bash
ngrok http 8080
```

Copy the HTTPS URL generated by Ngrok.

5. Configure Bitbucket Webhook

* Navigate to **Repository Settings → Webhooks → Add webhook**
* Set URL as `https://<your-ngrok-url>/webhook/bitbucket`
* Select triggers:

  * Pull Request: Created
  * Pull Request: Updated

### Frontend

1. Navigate to frontend folder and install dependencies:

```bash
cd FRONT-END
npm install
```

2. Run the frontend application:

```bash
npm start
```

## Features

### Implemented

* Handling Bitbucket webhook events
* Fetching modified files from PRs
* Integration with GPT, Grok, Copilot, Gemini for automated code reviews
* User authentication and authorization
* Database migrations using Liquibase
* Feedback management system
* AI assistant integration on user pages
* Admin page functionalities

## Developers

* Anton Rotaru
* Eva Merculov
